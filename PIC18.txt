;William Wallace
#include "p18f452.inc"
    
        VAR_1   EQU     0x20	    ;Location where binary value from input pin RB2 is read
   
        ORG             0x00	    ;Start at memory location 0x00
   
LOOP_1  MOVLW   0		
		MOVWF   PORTB	    ;Clear PORTB
		NOP
		MOVLW   B'11111111'
		MOVWF   TRISB	    ;Make all bits in TRISB inputs
		NOP	
		NOP		    ;Fire stimulus here
		NOP
		NOP
		MOVF    PORTB, W    ;Read input from PORTB put in WREG
		MOVWF   VAR_1	    ;Get value from WREG and place in user defined memory location for testing
		NOP
		NOP
		BTFSS   VAR_1, 2    ;Check if variable is low or high for RB2 (skip next inst if HIGH)
		GOTO    LOW_B
		GOTO    HIGH_B
		NOP
		NOP
LOW_B   MOVLW   0
		MOVWF   TRISB	    ;Set all pins on TRISB and TRISD to output
		MOVWF   TRISD
		NOP
		MOVWF   PORTB	    ;Clear both PORTB and PORTD
		MOVWF   PORTD
		NOP
		MOVLW   B'00001000' ;Output 0 to RB5 and 1 to RD3 (same binary sequence used for both ports)
		MOVWF   PORTB
                MOVWF   PORTD
		NOP
		GOTO    LOOP_1	    ;Infinite Loop
HIGH_B	MOVLW   0
		MOVWF   TRISB	    ;Set all pins on TRISB and TRISD to output
		MOVWF   TRISD
		NOP
		MOVWF   PORTB	    ;Clear both PORTB and PORTD
		MOVWF   PORTD
		NOP
		MOVLW   B'00100000' ;Output 1 to RB5 and 0 to RD3 (same binary sequence used for both ports)
		MOVWF   PORTB
                MOVWF   PORTD
		NOP
		GOTO    LOOP_1	    ;Infinite Loop
		
END